---
layout: post
title: '[转载] JS为什么 ++[[]][+[]]+[+[]] = 10 ？'
categories:
- Web开发
tags:
- 转载
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  duoshuo_thread_id: '1365771562581491753'
  _oembed_080c400f28b5c6ffd6e2dc35f322ca3b: '{{unknown}}'
  _oembed_c27878f1ad03c818d9ff745ea63be2cb: '{{unknown}}'
---
<h1>转自：珠海GDG微信</h1>
<img alt="qrcode_for_gh_5e32c47b5b23_258.jpg" src="http://zoomq.qiniudn.com/ZHGDG/design/qrcode_for_gh_5e32c47b5b23_258.jpg" />
<h1><strong>为什么 ++[[]][+[]]+[+[]] = 10 ？</strong></h1>
全文引用自:

http://www.aqee.net/can-you-explain-why-10/

首先，问这个问题 的人是个天才，他怎么会遇到这样的一个问题。其次，回答这个问题的人更是一个天才，我难以想象他会回答这个问题，更难以想象的是，他的回答是如此的详细和丰富和完整，真正称得上诲人不倦。

是的所有令人激荡不已的问题以及回答,现在多数出自: "栈溢出"

<em><strong>http://stackoverflow.com/questions/7202157/can-you-explain-why-10</strong></em>

既然遇到了这个问题，我们不妨也跟着提高一下。

这是一个Javascript语言题目，一个完全有效的等式，不信自己可以试一下，下面看看高人的题解：

<strong>++[[]][+[]]+[+[]]</strong>

如果把这段表达式拆分开来，它相等于：

<strong>++[[]][+[]]
+
[+[]]
</strong>
在JavaScript里，<strong>+[] === 0</strong> 是完全正确的。 <strong>+</strong> 会把一些字符转化成数字，在这里，这个式子会变成 <strong>+""</strong> 或 <strong>0</strong>。

因此，我们可以简化一下(<strong>++ 比 + 有更高的优先级</strong>)：

<strong>++[[]][0]
+
[0]
</strong>
因为 <strong>[[]][0]</strong> 的意思是：获取 <strong>[[]]</strong> 的第一个元素，这就得出了下面的结果：

<strong>[[]][0]</strong> 返回内部数组 (<strong>[]</strong>)。

根据语言规范，我们说 <strong>[[]][0] === []</strong> 是不正确的，

但让我们把这个内部数组称作 A，以避免错误的写法。
<strong>++[[]][0] == A + 1</strong>， 因为 <strong>++</strong> 的意思是“加一”。
<strong>++[[]][0] === +(A + 1)</strong>；

换句话说，你得到的永远是个数值

( <strong>+1</strong> 并不一定得到的是个数值，但 <strong>++</strong> 一定是)。

同样，我们可以把这一堆代码简化的更清晰。让我们把 A 换回成 <strong>[]</strong> :

<strong>+([] + 1)
+
[0]
</strong>
在JavaScript里，这也是正确的：

<strong>[] + 1 === "1"</strong>，因为 <strong>[] == ""</strong>

(这相当于一个空的数组的内部元素连接)，于是：

<strong>+([] + 1) === +("" + 1)</strong>，并且
<strong>+("" + 1) === +("1")</strong>，并且
<strong>+("1") === 1</strong>

让我们再次简化一下：
<strong>1
+
[0]
</strong>
同样，在Javascript里，这是正确的：

<strong>[0] == "0"</strong>，因为这是相当于一个有一个元素的数组的内部元素的连接。各元素会使用，分隔。当只有一个元素时，你可以推论出这个过程的结果就是它自身的第一个元素。
所以，最终我们得到

(<strong>数字 + 字符串 = 字符串</strong>)：

<strong>1
+
"0"
=== "10"</strong>

&nbsp;

<strong>\(^0^)/耶！</strong>

&nbsp;
<h2><strong>结论</strong></h2>
<em><strong>JS 是个变态语言!</strong></em><em><strong> over!</strong></em>
